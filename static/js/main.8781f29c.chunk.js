(this["webpackJsonpmovie-db"]=this["webpackJsonpmovie-db"]||[]).push([[0],{69:function(e,t,a){e.exports=a(84)},74:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),o=a.n(c),i=(a(74),a(37)),s=a(11),l=a(116),u=a(117),m=a(111),p=a(110),d=a(120),b=a(105),f=a(20),E=a(59),v=a.n(E),h=a(58),O=a.n(h),y=a(39),g=a(27),w=a(12),j=a(107),x=a(119),I=a(108),D=a(109),k=a(112),_=a(113),C="MOVIE_FETCH_REQUESTED",R="MOVIE_FETCH_SUCCEEDED",M="MOVIE_FETCH_FAILED",T="MOVIES_FETCH_REQUESTED",V="MOVIES_FETCH_SUCCEEDED",F="MOVIES_FETCH_FAILED",S=Object(b.a)((function(e){return{root:Object(s.a)({display:"block"},e.breakpoints.up("sm"),{display:"flex"}),image:{width:"initial",flexGrow:1},content:{flexGrow:1},box:{display:"block"}}})),N=function(e){var t=Object(w.c)(),a=S(),c=Object(w.d)((function(e){return e.movieReducer.movie}),w.b),o=Object(w.d)((function(e){return e.favoritesReducer}),w.b),i=e.match.params.id,s=o.some((function(e){return e.imdbID===c.imdbID}));return Object(n.useEffect)((function(){!c&&function(e){t({type:C,payload:{id:e}})}(i)}),[]),c&&r.a.createElement(j.a,null,r.a.createElement(x.a,{className:a.root},r.a.createElement(I.a,{component:"img",alt:"Contemplative Reptile",image:c.Poster,title:"Contemplative Reptile",className:a.image}),r.a.createElement(D.a,{className:a.content},r.a.createElement(p.a,{gutterBottom:!0,variant:"h5",component:"h2"},r.a.createElement(m.a,{edge:"start",color:"secondary","aria-label":"open drawer",onClick:function(){return e=c,void t(s?{type:"MOVIE_REMOVE_FAVORITE",id:e.imdbID}:{type:"MOVIE_ADD_FAVORITE",movie:e});var e}},s?r.a.createElement(k.a,null):r.a.createElement(_.a,null)),c.Title),r.a.createElement(p.a,null,c.Actors),r.a.createElement(p.a,{variant:"body2",color:"textSecondary",component:"p"},c.Plot))))},H=a(114),P=a(115),A=Object(b.a)((function(e){return{card:{display:"flex"},details:{display:"flex",flexDirection:"column"},content:{flex:"1 0 auto"},cover:{width:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38}}})),L=function(e){var t=A(),a=Object(w.c)(),c="/favorites"===e.match.path,o=function(t){e.items&&e.items.length>=e.totalResults||window.innerHeight+document.documentElement.scrollTop<document.documentElement.offsetHeight||a({type:T,payload:{search:e.search,page:e.page+1}})};return!c&&Object(n.useEffect)((function(){return window.addEventListener("scroll",o),o(),function(){return window.removeEventListener("scroll",o)}}),[]),e.items?e.items.map((function(e){return r.a.createElement(H.a,{key:e.imdbID,onClick:function(){return c?function(e){return a({type:C,payload:{movie:e}})}(e):(t=e.imdbID,a({type:C,payload:{id:t}}));var t}},r.a.createElement(j.a,{className:t.card},r.a.createElement(I.a,{className:t.cover,image:e.Poster,title:e.Title}),r.a.createElement(D.a,{className:t.content},r.a.createElement(p.a,{component:"h3",variant:"h5"},e.Title),r.a.createElement(p.a,{variant:"subtitle1",color:"textSecondary"},e.Type),r.a.createElement(p.a,null,e.Year))),r.a.createElement(P.a,null))})):r.a.createElement(r.a.Fragment,null)},U=a(118),B=Object(b.a)((function(e){return{root:{flexGrow:1},title:Object(s.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(s.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(f.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(f.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(6),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},starIcon:{color:e.palette.primary.contrastText},inputRoot:{color:"inherit"},inputInput:Object(s.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(23),W=a(60),J=a(13),Q=a.n(J),z=a(18),K=a(32),Y=a(43),$="http://www.omdbapi.com/?apikey=cb5da875",q={fetchMovie:function(){var e=Object(Y.a)(Q.a.mark((function e(t){var a,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat($,"&i=").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchMovies:function(){var e=Object(Y.a)(Q.a.mark((function e(t,a){var n,r;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat($,"&s=").concat(t,"&page=").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},X=Q.a.mark(ne),Z=Q.a.mark(re),ee=Q.a.mark(ce),te=Q.a.mark(oe),ae=Q.a.mark(ie);function ne(e){var t,a,n;return Q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=e.payload.id||e.payload.movie.imdbID,r.t0=e.payload.movie,r.t0){r.next=7;break}return r.next=6,Object(z.b)(q.fetchMovie,t);case 6:r.t0=r.sent;case 7:return a=r.t0,r.next=10,Object(z.c)({type:R,movie:a});case 10:return r.next=12,Object(z.c)(Object(K.push)("/movie/".concat(t)));case 12:r.next=19;break;case 14:return r.prev=14,r.t1=r.catch(0),n=r.t1.message,r.next=19,Object(z.c)({type:M,message:n});case 19:case"end":return r.stop()}}),X,null,[[0,14]])}function re(e){var t,a,n,r,c,o,i,s;return Q.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,t=e.payload,a=t.search,n=t.page,r=void 0===n?1:n,l.next=4,Object(z.b)(q.fetchMovies,a,r);case 4:return c=l.sent,o=c.Search,i=c.totalResults,l.next=9,Object(z.c)({type:V,payload:{items:o,totalResults:i,page:r}});case 9:return l.next=11,Object(z.c)(Object(K.push)("/"));case 11:l.next=18;break;case 13:return l.prev=13,l.t0=l.catch(0),s=l.t0.message,l.next=18,Object(z.c)({type:F,message:s});case 18:case"end":return l.stop()}}),Z,null,[[0,13]])}function ce(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.d)(C,ne);case 2:case"end":return e.stop()}}),ee)}function oe(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.d)(T,re);case 2:case"end":return e.stop()}}),te)}function ie(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.a)([ce(),oe()]);case 2:case"end":return e.stop()}}),ae)}var se=a(19);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=Object(G.c)({movieReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{movie:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE_FETCH_SUCCEEDED":return ue({},e,{movie:t.movie});case"MOVIE_FETCH_FAILED":return ue({},e,{movie:null});default:return e}},moviesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],page:1,totalResults:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIES_FETCH_SUCCEEDED":return t.payload.page>1?ue({},e,{},t.payload,{items:[].concat(Object(se.a)(e.items),Object(se.a)(t.payload.items))}):ue({},e,{},t.payload);case"MOVIES_FETCH_FAILED":return ue({},e,{items:[]});default:return e}},favoritesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE_ADD_FAVORITE":return e.some((function(e){return e.imdbID===t.movie.imdbID}))?e:[].concat(Object(se.a)(e),[t.movie]);case"MOVIE_REMOVE_FAVORITE":return e.filter((function(e){return e.imdbID!==t.id}));default:return e}}}),pe=a(15),de=Object(pe.a)(),be=Object(W.a)(),fe=Object(G.e)(me,Object(G.a)(be,Object(K.routerMiddleware)(de)));be.run(ie),o.a.render(r.a.createElement(w.a,{store:fe},r.a.createElement(g.b,{history:de},r.a.createElement((function(){var e=B(),t=Object(w.c)(),a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],s=c[1],b=Object(w.d)((function(e){return e.moviesReducer}),w.b),f=Object(w.d)((function(e){return e.favoritesReducer}),w.b)||[];return r.a.createElement("div",{className:e.root},r.a.createElement(l.a,{position:"sticky"},r.a.createElement(u.a,null,r.a.createElement(y.a,{to:"/favorites"},r.a.createElement(m.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(U.a,{color:"secondary",badgeContent:f.length,anchorOrigin:{horizontal:"right",vertical:"bottom"},className:e.margin},r.a.createElement(O.a,{className:e.starIcon})))),r.a.createElement(p.a,{className:e.title,variant:"h6",noWrap:!0},"Movie database"),r.a.createElement("div",{className:e.search},r.a.createElement("div",{className:e.searchIcon},r.a.createElement(v.a,null)),r.a.createElement(d.a,{placeholder:"Search movies\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"},onKeyDown:function(e){13===e.keyCode&&(s(e.target.value),function(e){t({type:T,payload:{search:e}})}(e.target.value))}})))),r.a.createElement(g.a,{path:"/",exact:!0,component:function(e){return r.a.createElement(L,Object.assign({},e,{search:o},b))}}),r.a.createElement(g.a,{path:"/movie/:id",exact:!0,component:N}),r.a.createElement(g.a,{path:"/favorites",exact:!0,component:function(e){return r.a.createElement(L,Object.assign({},e,{items:f,search:""}))}}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[69,1,2]]]);
//# sourceMappingURL=main.8781f29c.chunk.js.map